# CTextAlign中文文本对齐工具

## 项目简介

CTextAlign是一个部署在streamlit上的中文文本对齐工具，可以自动识别两个文档之间的相似段落，并提供字符级别的网格式对比界面，帮助研究人员快速发现并阅读文本差异。

## 主要功能

1. **文本分段**：基于原始文本的标点和换行符进行智能分段
2. **相似度匹配**：使用TF-IDF向量化和余弦相似度计算段落间的相似程度
3. **段落对齐表格**：显示所有段落，并将相似度高的段落自动配对在同一行
4. **字符网格视图**：提供字符级别的精确对比，使用不同颜色标记相同、删除、插入的字符
5. **统计分析**：提供相似度分布、段落长度对比和相似度热力图等可视化分析
6. **导出功能**：支持将分析结果导出为CSV、HTML、JSON和TXT格式

## 使用方法

1. 上传2-5个带有标点的中文文档（支持TXT、DOCX、PDF、MD格式），分配文档标签，并选择其中两个文档进行对比
2. 调整相似度阈值（建议0.25-0.5）
3. 设置最小段落长度（默认10个字符）
4. 设置网格每行字符数（默认30个字符）
5. 点击"处理所有已上传文档"按钮
6. 在不同标签页查看分析结果：
   - 对齐表格：查看段落级别的匹配结果
   - 字符网格视图：查看字符级别的精确对比，仅对差异段落的顺序相似的文档友好
   - 统计分析：查看段落对齐分布图，从图表中了解文档相似段落的分布情况

## 技术特点

- **智能分段**：根据中文标点和自然段落进行分段，保留原始文本结构
- **无标点比对**：比对时自动忽略标点符号，但在显示时保留
- **字符级对齐**：使用序列匹配算法实现精确的字符级对齐
- **紧凑网格布局**：使用正方形网格单元格和紧凑的行间距，提高可读性。
- **可视化分析**：提供多种图表帮助理解文本相似性和差异

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
streamlit run streamlit_app.py
```

## 适用场景

- 中文古籍不同版本的校对和比较
- 文学作品的修订版本对比
- 相似文本的变体研究